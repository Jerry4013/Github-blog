---
title:  "Angular (7)"
tags: Angular
---

### Day 16: 

## JavaScript setInterval

```javascript 1.8
onStart() {
    this.interval = setInterval(() => {
      this.timeNow = this.timeNow + 1;
      this.started.emit(this.timeNow);
    }, 1000);
  }
```

This anonymous function will be executed every one second. The `setInterval()` function is assigned to a reference 
`this.interval`. With this reference, later on, we can pause this interval using the code below.

```javascript 1.8
onPause() {
    clearInterval(this.interval);
}
```

Also notice that we used an ES6 syntax `() => { }`.

## Create our own attribute directive

Create a new file called `basic-highlight.directive.ts`. 

```typescript
import {Directive, ElementRef, OnInit} from '@angular/core';

@Directive({
  selector: '[appBasicHighlight]'
})
export class BasicHighlightDirective implements OnInit{
  constructor(private elementRef: ElementRef) {
  }

  ngOnInit() {
    this.elementRef.nativeElement.style.backgroundColor = 'green';
  }
}
```

@Directive tells Angular this is a directive. The only mandatory attribute it needs is a selector, because this is 
the way we can use the new directive. Here, we defined it as `[appBasicHighlight]`. This must be unique.

Also remember that when we define a custom directive, we must notify Angular in the `app.module.ts` file by adding it
 to the `declarations` array.

```typescript
import {BasicHighlightDirective} from './basic-highlight/basic-highlight.directive';
@NgModule({
  declarations: 
    BasicHighlightDirective
  ],
  imports: [
    BrowserModule,
    FormsModule
  ],
  providers: [],
  bootstrap: [AppComponent]
})
export class AppModule { }
```

Then we can use it in the html file.

```angular2html
<p appBasicHighlight>Style me with basic directive!</p>
```


### A better way

```typescript
import {Directive, ElementRef, OnInit, Renderer2} from '@angular/core';

@Directive({
  selector: '[appBetterHighlight]'
})
export class BetterHighlightDirective implements OnInit {

  constructor(private elRef: ElementRef, private renderer: Renderer2) { }

  ngOnInit(): void {
    this.renderer.setStyle(this.elRef.nativeElement, 'background-color', 'blue');
  }

}
```









